services:
  nanoservice-http:
    container_name: nanoservice-http
    hostname: nanoservice-http
    build:
      context: ../
      dockerfile: Dockerfile.dev
    ports:
      - "4000:4000"
      - "9091:9091"
    develop:
      watch:
        - action: sync
          path: ../dist
          target: /usr/src/app/dist
        - action: sync
          path: ../workflows
          target: /usr/src/app/workflows
        - action: sync
          path: ../public
          target: /usr/src/app/public
        - action: rebuild
          path: ../package.json
        - action: rebuild
          path: ../tsconfig.json
        - action: rebuild
          path: ../.env.local
    networks:
      - shared-network
networks:
  shared-network:
    external: true
