---
title: Creating triggers
---

# **Guide to Contributing Triggers in Nanoservice-ts**

Triggers in `nanoservice-ts` allow workflows to be executed **automatically** in response to specific events. This guide provides an overview of how to create, test, and contribute new triggers to the framework.

---

## **What Are Triggers?**  
Triggers define **when and how a workflow starts**. They listen for external or internal events, such as:  
- **HTTP Requests** (e.g., API calls)  
- **Scheduled Events** (e.g., cron jobs)  
- **Database Changes** (e.g., new records in Postgres)  
- **Queue Messages** (e.g., Kafka, RabbitMQ events)  
- **Custom Events** (e.g., user-defined triggers)  

Triggers are stored in the `/triggers` directory and are configurable via CLI.

---

## **Getting Started**  
### **1. Set Up Your Development Environment**  
Clone the repository and navigate to the `triggers` directory:  
```bash
git clone https://github.com/deskree-inc/nanoservice-ts.git
cd triggers
npm install
```

---

## **Trigger Structure**  
Each trigger must implement a standard interface and be placed inside `/triggers/{triggerName}.ts`.  

### **Example: HTTP Trigger**
```typescript
import { Trigger } from '../core/Trigger';

export default class HttpTrigger extends Trigger {
  constructor() {
    super('http', 'Triggers workflow execution on HTTP requests');
  }

  async execute(params: { method: string; url: string; body?: any }) {
    console.log(`Received ${params.method} request at ${params.url}`);
    return { success: true, data: params.body };
  }
}
```
**Key Components:**  
âœ… **Extends `Trigger` class** for standardization.  
âœ… **Implements `execute()` method** to define behavior.  
âœ… **Receives parameters dynamically** (e.g., HTTP method, URL, body).  

---

## **Adding a New Trigger**
1. **Create a new file in `/triggers`**  
   ```bash
   touch triggers/MyNewTrigger.ts
   ```
2. **Extend the base `Trigger` class**  
3. **Implement the `execute()` method** to define trigger logic.  
4. **Test the trigger using unit tests and manual execution.**  
5. **Submit a Pull Request (PR) for review.**  

---

## **Testing Your Trigger**
### **1. Writing Unit Tests**
All triggers must include tests in `/tests/triggers/`. Example test for `HttpTrigger`:  
```typescript
import HttpTrigger from '../../triggers/HttpTrigger';

describe('HttpTrigger', () => {
  it('should execute on HTTP request', async () => {
    const trigger = new HttpTrigger();
    const response = await trigger.execute({ method: 'POST', url: '/test', body: { key: 'value' } });

    expect(response.success).toBe(true);
    expect(response.data).toEqual({ key: 'value' });
  });
});
```
Run tests:  
```bash
npm test
```

### **2. Manual Testing**
To manually test the trigger:  
```bash
node ./bin/nanoservice-cli.js trigger run http --method POST --url /test --body '{"key": "value"}'
```

---

## **Trigger Configuration**
Each trigger must be **configurable via CLI and environment variables**. Example:
```typescript
export const triggerConfig = {
  retries: 3, // Number of retries before failing
  timeout: 5000, // Execution timeout in milliseconds
};
```

---

## **Submitting a Pull Request**
1. **Follow Branch Naming Convention**  
   ```bash
   git checkout -b feature/add-my-new-trigger
   ```
2. **Ensure Code Quality**  
   ```bash
   npm run lint
   npm test
   ```
3. **Submit a PR** with:  
   - A **clear description** of the trigger.  
   - Tests and configuration examples.  
   - Proper **documentation** updates.  

---

## **Best Practices**
âœ… **Keep triggers modular and lightweight.**  
âœ… **Ensure proper error handling and logging.**  
âœ… **Write clear documentation and tests.**  
âœ… **Follow the project's TypeScript style guide.**  

---

## **Final Notes**
Triggers are a **key part of automation in nanoservice-ts**. By contributing new triggers, you help expand the frameworkâ€™s capabilities and enable more use cases. If you have any questions, open an issue or join the discussion! ðŸš€  
```