---
title: Workflow Management
---

## CLI: Workflow Management (`nanoctl create workflow`)

[Workflows](../introduction/workflows.mdx) are central to Nanoservice-TS, defining the orchestration of [Nodes](../introduction/nodes.mdx) to implement business logic. The `nanoctl` CLI helps in scaffolding new workflow definition files, primarily through the `create workflow` command.

## `nanoctl create workflow <workflow-name>`

This command is used to generate a new workflow definition file within your Nanoservice-TS project.

**Purpose**: To create a boilerplate JSON file for a new workflow, placing it in the `workflows/` directory of your project. This file will contain a basic structure that you can then customize to define your specific sequence of nodes and trigger configuration.

**Usage**:

```bash
npx nanoctl@latest create workflow [workflow-name] [options]
# or if nanoctl is installed globally or as a project dependency
# nanoctl create workflow [workflow-name] [options]
```

*   **`[workflow-name]`** (required or prompted): The desired name for your workflow. This name is often used to identify the workflow for execution (e.g., as part of an HTTP path if it's an HTTP-triggered workflow) and should be descriptive (e.g., `ProcessNewOrder`, `GenerateDailyReport`).

**Interactive Prompts & Options**:

When you run `nanoctl create workflow`, you might be prompted for:

1.  **Workflow Name**: If not provided as an argument.
    ```
    ? What is the name of your new workflow? (e.g., MyExampleWorkflow) UserRegistration
    ```

2.  **Trigger Type**: The CLI might ask for the type of trigger that will initiate this workflow, which helps in generating a relevant trigger configuration block.
    ```
    ? Select a trigger type for your workflow: (Use arrow keys)
    ‚ùØ Http         - For workflows triggered by HTTP requests
      Schedule     - For workflows triggered by a cron schedule
      gRPC         - For workflows triggered by gRPC requests
      MessageQueue - For workflows triggered by a message queue (conceptual)
      None         - No specific trigger initially (you can add it manually)
    ```

3.  **(Potentially) Trigger Configuration Details**: Based on the selected trigger type, it might ask for further details (e.g., HTTP path and method for an HTTP trigger, cron expression for a Schedule trigger).

**What it Does**:

Upon completion, `nanoctl create workflow` will typically:

1.  Generate a new JSON file in the `workflows/` directory of your project (e.g., `workflows/UserRegistration.json` or `workflows/user-registration.json`).
2.  This JSON file will contain a boilerplate workflow structure, including:
    *   A `name` field pre-filled with the workflow name.
    *   A basic `trigger` block, potentially configured based on your interactive input (e.g., a simple HTTP GET trigger).
    *   An empty or minimal `nodes` array, ready for you to add your node configurations.

    ```json
    // Example generated UserRegistration.json (for an HTTP trigger)
    {
      "name": "UserRegistration",
      "trigger": {
        "type": "Http",
        "config": {
          "path": "/users/register", // Example path
          "method": "POST"
        }
      },
      "nodes": [
        {
          "id": "1",
          "node": "Utils.Logger", // Example starting node
          "input": {
            "message": "UserRegistration workflow started for path: {{trigger.path}}"
          },
          "next_node_id": null // TODO: Define next node
        }
        // TODO: Add more nodes to define the workflow logic
      ]
    }
    ```

**Example Invocation**:

To create a new workflow definition file named `ProcessPayment`:

```bash
npx nanoctl@latest create workflow ProcessPayment
```
The CLI will then likely prompt for the trigger type and other details, then generate `workflows/ProcessPayment.json`.

## Best Practices for Workflow Definition

*   **Clear Naming**: Give your workflow files and the `name` property within them clear, descriptive names.
*   **Modular Design**: Break down complex processes into smaller, manageable workflows if possible, or ensure your workflow has a clear, logical flow of nodes.
*   **Descriptive Node IDs**: Use meaningful `id` values for your nodes within the workflow JSON (e.g., `"log_start"`, `"validate_input"`, `"fetch_user_data"`) to make the workflow definition easier to read and debug.
*   **Error Handling**: Plan for error paths in your workflow by using `on_error_node_id` or conditional logic to handle failures in nodes gracefully.

The `create workflow` command simplifies the initial setup of workflow definition files, allowing you to quickly start outlining the logic and orchestration of your Nanoservice-TS application.

Next, learn about [authentication-related CLI commands](./login.mdx).
